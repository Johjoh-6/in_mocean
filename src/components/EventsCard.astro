---
import { MapPin, Clock, ArrowRight } from "@lucide/astro";
import { t, type Locale } from "../translations";

type EventCard = {
	date: string;
	title: string;
	location: string;
	image: string;
	color: string;
};

interface Props {
	locale: Locale;
	event: EventCard;
}

const { event, locale } = Astro.props;

const getMonth = (dateString: string): string => {
	const date = new Date(dateString);
	const month = date.getMonth();
	return t(locale, "date.months." + month);
};

// return the day number
const getDateNumber = (dateString: string): number => {
	const date = new Date(dateString);
	return date.getDate();
};

const getTime = (dateString: string): string => {
	const date = new Date(dateString);
	const hours = date.getHours();
	const minutes = date.getMinutes();
	return `${hours}:${minutes.toString().padStart(2, "0")}`;
};
---

<div
	class="group relative bg-slate-900/50 backdrop-blur-sm rounded-2xl overflow-hidden border border-slate-800 hover:border-pink-500/50 transition-all duration-300"
>
	<div class="flex flex-col md:flex-row items-stretch">
		<div
			class={`md:w-24 flex md:flex-col items-center justify-center p-4 bg-lineart-to-br ${event.color} text-white`}
		>
			<div class="text-center">
				<div class="text-3xl md:text-4xl font-bold mb-1">
					{getDateNumber(event.date)}
				</div>
				<div class="text-xs md:text-sm uppercase tracking-wider">
					{getMonth(event.date)}
				</div>
			</div>
		</div>

		<div class="flex-1 flex flex-col md:flex-row">
			<div class="flex-1 p-4 md:p-5">
				<h3
					class="text-xl md:text-2xl text-white mb-3 group-hover:text-pink-400 transition-colors"
				>
					{event.title}
				</h3>

				<div class="space-y-2 mb-4">
					<div class="flex items-center gap-2 text-gray-400 text-sm">
						<MapPin class="w-4 h-4 text-pink-400" />
						<span>{event.location}</span>
					</div>
					<div class="flex items-center gap-2 text-gray-400 text-sm">
						<Clock class="w-4 h-4 text-pink-400" />
						<span>{getTime(event.date)}</span>
					</div>
				</div>

				<button
					class="flex items-center gap-2 text-pink-400 hover:text-pink-300 transition-colors group text-sm"
				>
					<span>{t(locale, "events.details")}</span>
					<ArrowRight
						class="w-4 h-4 group-hover:translate-x-1 transition-transform"
					/>
				</button>
			</div>

			<div class="md:w-48 h-32 md:h-auto relative overflow-hidden">
				<img
					src={event.image}
					alt={event.title}
					class="w-full h-full object-cover"
				/>
				<div
					class="absolute inset-0 bg-linear-to-br from-slate-900/80 to-transparent md:from-transparent md:to-slate-900/0"
				>
				</div>
			</div>
		</div>
	</div>

	<div
		class={`absolute bottom-0 left-0 right-0 h-1 bg-linear-to-br ${event.color} origin-left`}
	>
	</div>
</div>
